(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{58:function(e,n,t){},67:function(e,n,t){"use strict";t.r(n);var r=t(4),c=t(3),i=t.n(c),a=t(50),o=t.n(a),j=(t(58),t(9)),d=t(19),s=t(26);function u(){var e=Object(s.a)(["\n  query($id: ID){\n    book(id: $id){\n      id\n      name\n      genre\n      author{\n        id\n        name\n        age\n        books{\n          name\n          id\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}function b(){var e=Object(s.a)(["\n  mutation AddBook($name : String!, $genre: String!, $authorId: ID!){\n    addBook(name: $name, genre: $genre, authorId: $authorId) {\n      id\n      name\n    }\n  }\n"]);return b=function(){return e},e}function l(){var e=Object(s.a)(["\n  {\n    authors {\n      name\n      id\n    }\n  }\n"]);return l=function(){return e},e}function h(){var e=Object(s.a)(["\n  {\n    books {\n      name\n      id\n    }\n  }\n"]);return h=function(){return e},e}var O=Object(j.gql)(h()),x=Object(j.gql)(l()),f=Object(j.gql)(b()),v=Object(j.gql)(u());var m=function(e){var n=Object(j.useLazyQuery)(v),t=Object(d.a)(n,2),i=t[0],a=t[1].data;Object(c.useEffect)((function(){e.data&&i({variables:{id:e.data}})}),[e.data,i]);var o=function(){if(a){var e=a.book;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:e.name}),Object(r.jsx)("p",{children:e.genre}),Object(r.jsx)("p",{children:e.author.name}),Object(r.jsx)("p",{children:"All books by this author:"}),Object(r.jsx)("ul",{className:"other-books",children:e.author.books.map((function(e){return Object(r.jsx)("li",{children:e.name},e.id)}))})]})}return Object(r.jsx)("div",{children:"No book selected"})}();return Object(r.jsx)("div",{id:"book-details",children:o})};var g=function(e){var n=Object(c.useState)(null),t=Object(d.a)(n,2),i=t[0],a=t[1],o=Object(j.useQuery)(O),s=o.loading,u=o.error,b=o.data,l=s?Object(r.jsx)("p",{children:"Loading books..."}):u?Object(r.jsx)("p",{children:"Error :("}):b.books.map((function(e){return Object(r.jsx)("li",{onClick:function(n){a(e.id)},children:e.name},e.id)}));return Object(r.jsxs)("div",{children:[Object(r.jsx)("ul",{id:"book-list",children:l}),Object(r.jsx)(m,{data:i})]})};var p=function(e){var n=Object(c.useState)(""),t=Object(d.a)(n,2),i=t[0],a=t[1],o=Object(c.useState)(""),s=Object(d.a)(o,2),u=s[0],b=s[1],l=Object(c.useState)(""),h=Object(d.a)(l,2),v=h[0],m=h[1],g=function(){var e=Object(j.useQuery)(x),n=e.loading,t=e.error,c=e.data;return n?Object(r.jsx)("option",{disabled:!0,children:"Loading Authors.."}):t?Object(r.jsx)("p",{children:"Error :("}):c.authors.map((function(e){return Object(r.jsx)("option",{value:e.id,children:e.name},e.id)}))}(),p=Object(j.useMutation)(f),k=Object(d.a)(p,2),y=k[0];return k[1].loading,Object(r.jsxs)("form",{id:"add-book",onSubmit:function(e){e.preventDefault(),y({variables:{name:i,genre:u,authorId:v},refetchQueries:[{query:O}]})},children:[Object(r.jsxs)("div",{className:"field",children:[Object(r.jsx)("label",{children:"Book name:"}),Object(r.jsx)("input",{onChange:function(e){a(e.target.value)}})]}),Object(r.jsxs)("div",{className:"field",children:[Object(r.jsx)("label",{children:"Genre:"}),Object(r.jsx)("input",{onChange:function(e){b(e.target.value)}})]}),Object(r.jsxs)("div",{className:"field",children:[Object(r.jsx)("label",{children:"Author:"}),Object(r.jsxs)("select",{onChange:function(e){m(e.target.value)},children:[Object(r.jsx)("option",{children:"Select author"}),g]})]}),Object(r.jsx)("button",{type:"submit",children:"+"})]})},k=new j.ApolloClient({uri:"https://graph-ql-reading-server.vercel.app/graphql",cache:new j.InMemoryCache});var y=function(){return Object(r.jsx)(j.ApolloProvider,{client:k,children:Object(r.jsxs)("div",{id:"main",children:[Object(r.jsx)("h1",{children:"Reading List"}),Object(r.jsx)(g,{}),Object(r.jsx)(p,{})]})})};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(y,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.e4909a0e.chunk.js.map